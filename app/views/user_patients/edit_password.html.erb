<div class="container mb-5">
  <h2 class="my-5">Editar contraseña</h2>

  <%= form_for @user_patient, url: { action:"update_password" }, method: :patch do |form| %>
    <div class="row mb-4">
      <div class="col">
        <div class="form-outline">
          <%= form.label :password, 'Contraseña' %><br />
          <%= form.password_field :password, class:'form-control', id:"myInput" %>
          <label class="mt-2"><i class="fas fa-eye-slash fa-eye-1" style="cursor:pointer;"></i>
            <input type="checkbox" onclick="myFunction()" style="display:none;">
          </label>
        </div>
      </div>
      <div class="col">
        <div class="form-outline">
          <%= form.label 'Confirmación de contraseña' %><br />
          <%= form.password_field :password_confirmation, class:'form-control', id:"myInput" %>
          <label class="mt-2"><i class="fas fa-eye-slash fa-eye-1" style="cursor:pointer;"></i>
            <input type="checkbox" onclick="myFunction()" style="display:none;">
          </label>
        </div>
      </div>
    </div>
     <div class="field">
      <%= form.label 'Contraseña actual' %> <i>(Contraseña actual para confirmar cambios)</i><br />
      <%= form.password_field :current_password, class:'form-control', id:'myInputTwo' %>
      <label class="mt-2"><i class="fas fa-eye-slash fa-eye-2" style="cursor:pointer;" ></i>
        <input type="checkbox" onclick="myFunctionTwo()" style="display:none;">
      </label>
    </div>
    <%=form.submit 'Guardar', class:'btn btn-success btn-block my-4' %>
  <% end %>
</div>

<script>
  function myFunction() {
    var xArray = document.querySelectorAll("#myInput");
    var eyes = document.querySelectorAll(".fa-eye-1")
    xArray.forEach(function(x) {
      if (x.type === "password") {
        x.type = "text";
        eyes.forEach(eye => {
          eye.classList.remove("fa-eye-slash");
          eye.classList.add('fa-eye');
        });
      } else {
        x.type = "password";
        eyes.forEach(eye => {
          eye.classList.remove("fa-eye");
          eye.classList.add('fa-eye-slash');
        });
      }
    });
  }
  function myFunctionTwo() {
  var x = document.getElementById("myInputTwo");
  var eye = document.querySelector(".fa-eye-2")
  if (x.type === "password") {
    x.type = "text";
    eye.classList.remove("fa-eye-slash");
    eye.classList.add('fa-eye');   
  } else {
    x.type = "password";
    eye.classList.remove("fa-eye");
    eye.classList.add('fa-eye-slash');
  }
}
</script>
